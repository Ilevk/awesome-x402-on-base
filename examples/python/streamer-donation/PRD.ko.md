# ìŠ¤íŠ¸ë¦¬ë¨¸ í›„ì› ì‹œìŠ¤í…œ - Product Requirements Document (PRD)

> **ë²„ì „**: 1.0
> **ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-01-09
> **ì‘ì„±ì**: Logan (Base Korea Developer Ambassador)
> **ìƒíƒœ**: ìŠ¹ì¸ë¨ âœ…

---

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

### í”„ë¡œì íŠ¸ ì •ë³´
- **í”„ë¡œì íŠ¸ëª…**: Base ê¸°ë°˜ ìŠ¤íŠ¸ë¦¬ë¨¸ í›„ì› ì‹œìŠ¤í…œ (x402 í”„ë¡œí† ì½œ í™œìš©)
- **ëª©í‘œ**: ìŠ¤íŠ¸ë¦¬ë¨¸ê°€ ì•”í˜¸í™”íë¡œ ì¦‰ì‹œ í›„ì›ì„ ë°›ì„ ìˆ˜ ìˆëŠ” ì›¹ í”Œë«í¼ êµ¬ì¶•
- **ëŒ€ìƒ ì‚¬ìš©ì**:
  - **1ì°¨**: êµ­ë‚´ì™¸ YouTube/Twitch ìŠ¤íŠ¸ë¦¬ë¨¸
  - **2ì°¨**: ìŠ¤íŠ¸ë¦¬ë¨¸ì˜ ì‹œì²­ì (í›„ì›ì)
- **í•µì‹¬ ê¸°ìˆ **: x402 ê²°ì œ í”„ë¡œí† ì½œ + Base ë¸”ë¡ì²´ì¸ + RocksDB
- **ì˜ˆìƒ ê°œë°œ ê¸°ê°„**: 1ë‹¨ê³„ MVP (2-3ì£¼)

### ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜
1. **ìŠ¤íŠ¸ë¦¬ë¨¸**: ê¸°ì¡´ í”Œë«í¼ ìˆ˜ìˆ˜ë£Œ(20-30%) ì—†ì´ ì§ì ‘ í›„ì› ìˆ˜ë ¹
2. **ì‹œì²­ì**: ë¹ ë¥´ê³  ì €ë ´í•œ ë§ˆì´í¬ë¡œí˜ì´ë¨¼íŠ¸ (~$0.01 ë¹„ìš©ìœ¼ë¡œ $1 í›„ì›)
3. **í”Œë«í¼**: Base ìƒíƒœê³„ ì‚¬ìš© ì‚¬ë¡€ í™•ì¥ ë° x402 í”„ë¡œí† ì½œ í™ë³´

---

## ğŸ¯ í•µì‹¬ ìš”êµ¬ì‚¬í•­

### 1. ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

#### 1.1 ìŠ¤íŠ¸ë¦¬ë¨¸ ê¸°ëŠ¥
| ID | ê¸°ëŠ¥ | ìš°ì„ ìˆœìœ„ | êµ¬í˜„ ë‹¨ê³„ |
|----|------|----------|-----------|
| F-S01 | ê³ ìœ í•œ í›„ì› ë§í¬ ë°œê¸‰ (UUID ê¸°ë°˜) | P0 | Phase 1 |
| F-S02 | í›„ì› ê¸ˆì•¡ í‹°ì–´ ì»¤ìŠ¤í„°ë§ˆì´ì§• | P0 | Phase 1 |
| F-S03 | í‹°ì–´ë³„ íŒì—… ë©”ì‹œì§€ ì„¤ì • | P0 | Phase 1 |
| F-S04 | í›„ì› ë°›ì„ ì§€ê°‘ ì£¼ì†Œ ë“±ë¡ | P0 | Phase 1 |
| F-S05 | ë°©ì†¡ í”Œë«í¼ ì„ íƒ (YouTube, Twitch) | P1 | Phase 1 |
| F-S06 | ê°ì‚¬ ë©”ì‹œì§€ ì»¤ìŠ¤í„°ë§ˆì´ì§• | P1 | Phase 1 |
| F-S07 | í›„ì› ë‚´ì—­ ëŒ€ì‹œë³´ë“œ | P2 | Phase 2 |
| F-S08 | ì‹¤ì‹œê°„ í›„ì› ì•Œë¦¼ | P2 | Phase 2 |

#### 1.2 ì‹œì²­ì (í›„ì›ì) ê¸°ëŠ¥
| ID | ê¸°ëŠ¥ | ìš°ì„ ìˆœìœ„ | êµ¬í˜„ ë‹¨ê³„ |
|----|------|----------|-----------|
| F-V01 | í›„ì› í˜ì´ì§€ ì ‘ê·¼ (ë§í¬ í´ë¦­) | P0 | Phase 1 |
| F-V02 | í›„ì› ê¸ˆì•¡ í‹°ì–´ ì„ íƒ | P0 | Phase 1 |
| F-V03 | Web3 ì§€ê°‘ ì—°ê²° (MetaMask, Coinbase Wallet) | P0 | Phase 1 |
| F-V04 | x402 í”„ë¡œí† ì½œë¡œ ê²°ì œ ì²˜ë¦¬ | P0 | Phase 1 |
| F-V05 | ì»¤ìŠ¤í…€ ë©”ì‹œì§€ ì…ë ¥ (ìµœëŒ€ 200ì) | P1 | Phase 1 |
| F-V06 | í´ë¦½ ì²¨ë¶€ | P2 | Phase 2 |
| F-V07 | í›„ì› ì™„ë£Œ í™•ì¸ í˜ì´ì§€ | P0 | Phase 1 |
| F-V08 | ìì—°ì–´ ëª…ë ¹ìœ¼ë¡œ í›„ì› (AI Agent) | P3 | Phase 2 |

#### 1.3 ì‹œìŠ¤í…œ ê¸°ëŠ¥
| ID | ê¸°ëŠ¥ | ìš°ì„ ìˆœìœ„ | êµ¬í˜„ ë‹¨ê³„ |
|----|------|----------|-----------|
| F-SYS01 | ì§€ê°‘ ì£¼ì†Œ ìœ íš¨ì„± ê²€ì¦ | P0 | Phase 1 |
| F-SYS02 | í›„ì› ê¸ˆì•¡ ë²”ìœ„ ì œí•œ ($0.01-$1000) | P0 | Phase 1 |
| F-SYS03 | ë©”ì‹œì§€ XSS ë°©ì§€ (ìƒˆë‹ˆíƒ€ì´ì§•) | P0 | Phase 1 |
| F-SYS04 | RocksDBì— ë°ì´í„° ì˜ì†í™” | P0 | Phase 1 |
| F-SYS05 | Base Sepolia í…ŒìŠ¤íŠ¸ë„· ì§€ì› | P0 | Phase 1 |
| F-SYS06 | Base Mainnet ì§€ì› | P1 | Phase 1.5 |
| F-SYS07 | Rate limiting | P2 | Phase 2 |
| F-SYS08 | ì¸ì¦/ê¶Œí•œ ê´€ë¦¬ | P2 | Phase 2 |

### 2. ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

#### 2.1 ì„±ëŠ¥
- **ê²°ì œ ì²˜ë¦¬ ì‹œê°„**: < 5ì´ˆ (x402 + Base Sepolia)
- **í˜ì´ì§€ ë¡œë“œ ì‹œê°„**: < 2ì´ˆ (ì´ˆê¸° ë¡œë“œ)
- **ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬**: < 10ms (RocksDB ì½ê¸°/ì“°ê¸°)
- **ë™ì‹œ ì ‘ì† ì§€ì›**: 100ëª… (Phase 1), 1000ëª… (Phase 2)

#### 2.2 ë³´ì•ˆ
- âœ… **ì§€ê°‘ ì£¼ì†Œ ê²€ì¦**: Web3.is_address() ì‚¬ìš©
- âœ… **ì…ë ¥ ê°’ ê²€ì¦**: Pydantic ëª¨ë¸ ê¸°ë°˜ íƒ€ì… ì²´í¬
- âœ… **XSS ë°©ì§€**: bleach ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ HTML íƒœê·¸ ì œê±°
- âœ… **CORS ì„¤ì •**: ê°œë°œ í™˜ê²½ í—ˆìš© ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬
- â³ **Rate limiting**: Phase 2 (IP/ì§€ê°‘ ê¸°ë°˜)
- â³ **íŠ¸ëœì­ì…˜ ì¬ìƒ ê³µê²© ë°©ì§€**: Phase 2 (nonce ì¶”ì )

#### 2.3 í™•ì¥ì„±
- **ë°ì´í„°ë² ì´ìŠ¤**: RocksDB (Phase 1) â†’ PostgreSQL (Phase 2)
- **ìŠ¤íŠ¸ë¦¬ë¨¸ ìˆ˜**: 10ëª… (Phase 1) â†’ 1000ëª… (Phase 2)
- **í›„ì› ê¸°ë¡**: 1000ê±´ (Phase 1) â†’ 100ë§Œê±´ (Phase 2)

#### 2.4 ì‚¬ìš©ì„±
- **ì§€ê°‘ ì—°ê²°**: 3í´ë¦­ ì´ë‚´
- **í›„ì› ì™„ë£Œ**: 5ë‹¨ê³„ ì´ë‚´
- **ì—ëŸ¬ ë©”ì‹œì§€**: í•œêµ­ì–´/ì˜ì–´ ëª…í™•í•œ ì•ˆë‚´
- **ëª¨ë°”ì¼ ì§€ì›**: Phase 2

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 3.1 ì „ì²´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                í”„ë¡ íŠ¸ì—”ë“œ (HTML/CSS/Vanilla JS)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ ëœë”© í˜ì´ì§€ (/)                                            â”‚
â”‚  â€¢ ìŠ¤íŠ¸ë¦¬ë¨¸ ëŒ€ì‹œë³´ë“œ (/dashboard/{id}) - ëª¨í‚¹                â”‚
â”‚  â€¢ í›„ì› í˜ì´ì§€ (/donate/{id}) - x402 ê²°ì œ                    â”‚
â”‚  â€¢ ê°ì‚¬ í˜ì´ì§€ (/thank-you) - í™•ì¸ ë° ë©”ì‹œì§€                 â”‚
â”‚                                                               â”‚
â”‚  Web3 í†µí•©: viem (ì§€ê°‘ ì—°ê²°, íŠ¸ëœì­ì…˜ ì„œëª…)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ HTTPS + x402 Protocol
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ë°±ì—”ë“œ (FastAPI + Python 3.10+)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  API ì—”ë“œí¬ì¸íŠ¸:                                              â”‚
â”‚    â€¢ GET  /api/streamer/{id}          - ìŠ¤íŠ¸ë¦¬ë¨¸ ì •ë³´ ì¡°íšŒ   â”‚
â”‚    â€¢ GET  /donate/{id}                - í›„ì› í˜ì´ì§€ (x402)   â”‚
â”‚    â€¢ POST /api/donate/{id}/message    - ë©”ì‹œì§€ ì œì¶œ          â”‚
â”‚    â€¢ GET  /dashboard/{id}             - ëª¨í‚¹ ëŒ€ì‹œë³´ë“œ        â”‚
â”‚                                                               â”‚
â”‚  ë¯¸ë“¤ì›¨ì–´:                                                    â”‚
â”‚    â€¢ x402.fastapi.require_payment     - ê²°ì œ ê²€ì¦            â”‚
â”‚    â€¢ CORSMiddleware                   - ê°œë°œìš© CORS          â”‚
â”‚                                                               â”‚
â”‚  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§:                                               â”‚
â”‚    â€¢ ìŠ¤íŠ¸ë¦¬ë¨¸ ì„¤ì • ê´€ë¦¬ (DonationDB)                          â”‚
â”‚    â€¢ í›„ì› í‹°ì–´ ë§¤ì¹­ ë° ë©”ì‹œì§€ ê²€ì¦                           â”‚
â”‚    â€¢ ì§€ê°‘ ì£¼ì†Œ ê²€ì¦ (Web3)                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ë°ì´í„° ë ˆì´ì–´ (RocksDB)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Key-Value ìŠ¤í† ì–´:                                            â”‚
â”‚    â€¢ streamers:{uuid} â†’ Streamer JSON                         â”‚
â”‚    â€¢ donations:{uuid} â†’ DonationMessage JSON                  â”‚
â”‚                                                               â”‚
â”‚  íŠ¹ì§•:                                                        â”‚
â”‚    â€¢ ë””ìŠ¤í¬ ì˜ì†í™”                                            â”‚
â”‚    â€¢ ACID íŠ¸ëœì­ì…˜                                            â”‚
â”‚    â€¢ < 10ms ì½ê¸°/ì“°ê¸°                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 x402 ê²°ì œ í”Œë¡œìš°

```
ì‹œì²­ì                  í”„ë¡ íŠ¸ì—”ë“œ              ë°±ì—”ë“œ              Base ë¸”ë¡ì²´ì¸
  â”‚                        â”‚                     â”‚                      â”‚
  â”œâ”€(1) í›„ì› ë§í¬ í´ë¦­â”€â”€â”€â”€â”€â†’                     â”‚                      â”‚
  â”‚                        â”‚                     â”‚                      â”‚
  â”‚                        â”œâ”€(2) GET /donate/{id}â”€â†’                     â”‚
  â”‚                        â”‚                     â”‚                      â”‚
  â”‚                        â†â”€(3) 402 Payment Requiredâ”€â”¤                 â”‚
  â”‚                        â”‚     (ê¸ˆì•¡, ì£¼ì†Œ, ë„¤íŠ¸ì›Œí¬)â”‚                 â”‚
  â”‚                        â”‚                     â”‚                      â”‚
  â”‚â†â”€(4) ì§€ê°‘ ì—°ê²° ìš”ì²­â”€â”€â”€â”€â”¤                     â”‚                      â”‚
  â”‚                        â”‚                     â”‚                      â”‚
  â”œâ”€(5) MetaMask ìŠ¹ì¸â”€â”€â”€â”€â”€â”€â†’                     â”‚                      â”‚
  â”‚                        â”‚                     â”‚                      â”‚
  â”‚                        â”œâ”€(6) íŠ¸ëœì­ì…˜ ì„œëª…ìƒì„±â”€â†’                     â”‚
  â”‚                        â”‚                     â”‚                      â”‚
  â”‚                        â”œâ”€(7) GET /donate/{id}â”€â†’                     â”‚
  â”‚                        â”‚   X-PAYMENT: {proof}â”‚                      â”‚
  â”‚                        â”‚                     â”‚                      â”‚
  â”‚                        â”‚                     â”œâ”€(8) ê²°ì œ ê²€ì¦â”€â”€â”€â”€â”€â”€â”€â”€â†’
  â”‚                        â”‚                     â”‚                      â”‚
  â”‚                        â”‚                     â”‚â†â”€(9) TX Confirmedâ”€â”€â”€â”€â”¤
  â”‚                        â”‚                     â”‚                      â”‚
  â”‚                        â†â”€(10) 200 OK + ê°ì‚¬ í˜ì´ì§€â”€â”¤                 â”‚
  â”‚                        â”‚                     â”‚                      â”‚
  â”‚â†â”€(11) í›„ì› ì™„ë£Œ í‘œì‹œâ”€â”€â”€â”¤                     â”‚                      â”‚
```

---

## ğŸ“Š ë°ì´í„° ëª¨ë¸

### 4.1 Streamer (ìŠ¤íŠ¸ë¦¬ë¨¸)

```python
class Streamer(BaseModel):
    """ìŠ¤íŠ¸ë¦¬ë¨¸ í”„ë¡œí•„ ë° ì„¤ì •"""
    id: str                          # UUID4 (ê³ ìœ  ì‹ë³„ì)
    name: str                        # ìŠ¤íŠ¸ë¦¬ë¨¸ ì´ë¦„
    wallet_address: str              # Base ë„¤íŠ¸ì›Œí¬ ì§€ê°‘ ì£¼ì†Œ (0x...)
    platforms: List[Platform]        # ["youtube", "twitch"]
    avatar_url: Optional[HttpUrl]    # í”„ë¡œí•„ ì´ë¯¸ì§€ URL
    donation_tiers: List[DonationTier]  # í›„ì› í‹°ì–´ ì„¤ì •
    thank_you_message: str           # ê°ì‚¬ ë©”ì‹œì§€
```

**ì˜ˆì‹œ ë°ì´í„°:**
```json
{
  "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "name": "Logan",
  "wallet_address": "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb",
  "platforms": ["youtube", "twitch"],
  "avatar_url": "https://example.com/avatars/logan.png",
  "donation_tiers": [
    {
      "amount_usd": 1.0,
      "popup_message": "ê°ì‚¬í•©ë‹ˆë‹¤! ğŸ’™",
      "duration_ms": 3000
    },
    {
      "amount_usd": 5.0,
      "popup_message": "ëŒ€ë°• í›„ì›! ğŸ‰",
      "duration_ms": 5000
    },
    {
      "amount_usd": 10.0,
      "popup_message": "ë ˆì „ë“œ! ğŸŒŸ",
      "duration_ms": 8000
    }
  ],
  "thank_you_message": "ë°©ì†¡ ì‹œì²­í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!"
}
```

### 4.2 DonationTier (í›„ì› í‹°ì–´)

```python
class DonationTier(BaseModel):
    """í›„ì› ê¸ˆì•¡ë³„ ì„¤ì •"""
    amount_usd: float        # í›„ì› ê¸ˆì•¡ (USD)
    popup_message: str       # ë°©ì†¡ í™”ë©´ì— í‘œì‹œë  ë©”ì‹œì§€
    duration_ms: int = 3000  # ë©”ì‹œì§€ í‘œì‹œ ì‹œê°„ (ë°€ë¦¬ì´ˆ)
```

### 4.3 DonationMessage (í›„ì› ë©”ì‹œì§€)

```python
class DonationMessage(BaseModel):
    """ì‹œì²­ìì˜ í›„ì› ê¸°ë¡"""
    donation_id: str           # UUID4 (í›„ì› ê³ ìœ  ID)
    streamer_id: str           # ìŠ¤íŠ¸ë¦¬ë¨¸ ID (ì™¸ë˜í‚¤)
    amount_usd: float          # í›„ì› ê¸ˆì•¡ (USD)
    donor_address: str         # í›„ì›ì ì§€ê°‘ ì£¼ì†Œ (0x...)
    message: Optional[str]     # ì»¤ìŠ¤í…€ ë©”ì‹œì§€ (ìµœëŒ€ 200ì)
    clip_url: Optional[str]    # í´ë¦½ URL (Phase 2)
    timestamp: int             # Unix timestamp
    tx_hash: str               # ë¸”ë¡ì²´ì¸ íŠ¸ëœì­ì…˜ í•´ì‹œ
```

**ì˜ˆì‹œ ë°ì´í„°:**
```json
{
  "donation_id": "d9e8f7g6-h5i4-3210-jklm-nopqrstuvwxy",
  "streamer_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "amount_usd": 5.0,
  "donor_address": "0x1234567890abcdef1234567890abcdef12345678",
  "message": "ì¬ë°ŒëŠ” ë°©ì†¡ ê°ì‚¬í•©ë‹ˆë‹¤! ğŸ”¥",
  "clip_url": null,
  "timestamp": 1704672000,
  "tx_hash": "0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
}
```

### 4.4 Platform (ë°©ì†¡ í”Œë«í¼)

```python
class Platform(str, Enum):
    """ì§€ì› ìŠ¤íŠ¸ë¦¬ë° í”Œë«í¼"""
    YOUTUBE = "youtube"
    TWITCH = "twitch"
```

---

## ğŸ”Œ API ëª…ì„¸

### 5.1 ìŠ¤íŠ¸ë¦¬ë¨¸ ì •ë³´ ì¡°íšŒ

**ì—”ë“œí¬ì¸íŠ¸**: `GET /api/streamer/{streamer_id}`

**ì„¤ëª…**: ìŠ¤íŠ¸ë¦¬ë¨¸ì˜ í”„ë¡œí•„ ë° í›„ì› ì„¤ì • ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

**ê²½ë¡œ íŒŒë¼ë¯¸í„°**:
- `streamer_id` (string, required): ìŠ¤íŠ¸ë¦¬ë¨¸ UUID

**ì‘ë‹µ 200 OK**:
```json
{
  "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "name": "Logan",
  "wallet_address": "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb",
  "platforms": ["youtube", "twitch"],
  "avatar_url": "https://example.com/avatar.png",
  "donation_tiers": [...],
  "thank_you_message": "ë°©ì†¡ ì‹œì²­í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!"
}
```

**ì‘ë‹µ 404 Not Found**:
```json
{
  "detail": "ìŠ¤íŠ¸ë¦¬ë¨¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"
}
```

### 5.2 í›„ì› í˜ì´ì§€ (x402 ë³´í˜¸)

**ì—”ë“œí¬ì¸íŠ¸**: `GET /donate/{streamer_id}`

**ì„¤ëª…**: x402 í”„ë¡œí† ì½œë¡œ ë³´í˜¸ëœ í›„ì› í˜ì´ì§€. ê²°ì œ ì—†ì´ ì ‘ê·¼ ì‹œ 402 ì‘ë‹µ, ê²°ì œ í›„ HTML í˜ì´ì§€ ë°˜í™˜.

**ê²½ë¡œ íŒŒë¼ë¯¸í„°**:
- `streamer_id` (string, required): ìŠ¤íŠ¸ë¦¬ë¨¸ UUID

**ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°**:
- `amount` (float, optional): ë¯¸ë¦¬ ì„ íƒëœ í›„ì› í‹°ì–´ ê¸ˆì•¡

**ìš”ì²­ í—¤ë”** (ê²°ì œ ì‹œ):
- `X-PAYMENT`: x402 ê²°ì œ ì¦ëª… (ë¯¸ë“¤ì›¨ì–´ê°€ ìë™ ì²˜ë¦¬)

**ì‘ë‹µ 402 Payment Required** (ê²°ì œ í•„ìš”):
```http
HTTP/1.1 402 Payment Required
Content-Type: application/json
X-Accept-Payment: <payment_details>

{
  "message": "ê²°ì œê°€ í•„ìš”í•©ë‹ˆë‹¤",
  "amount_usd": 5.0,
  "pay_to_address": "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb",
  "network": "base-sepolia"
}
```

**ì‘ë‹µ 200 OK** (ê²°ì œ ì™„ë£Œ í›„):
```html
<!DOCTYPE html>
<html>
  <head><title>Loganì—ê²Œ í›„ì›í•˜ê¸°</title></head>
  <body>
    <!-- í›„ì› ì„±ê³µ í˜ì´ì§€ -->
  </body>
</html>
```

### 5.3 í›„ì› ë©”ì‹œì§€ ì œì¶œ

**ì—”ë“œí¬ì¸íŠ¸**: `POST /api/donate/{streamer_id}/message`

**ì„¤ëª…**: ì‹œì²­ìì˜ ì»¤ìŠ¤í…€ ë©”ì‹œì§€ì™€ í›„ì› ì •ë³´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

**ê²½ë¡œ íŒŒë¼ë¯¸í„°**:
- `streamer_id` (string, required): ìŠ¤íŠ¸ë¦¬ë¨¸ UUID

**ìš”ì²­ ë°”ë””**:
```json
{
  "amount_usd": 5.0,
  "donor_address": "0x1234567890abcdef1234567890abcdef12345678",
  "message": "ì¬ë°ŒëŠ” ë°©ì†¡!",
  "clip_url": null,
  "tx_hash": "0xabcdef..."
}
```

**ê²€ì¦ ê·œì¹™**:
- `amount_usd`: ìŠ¤íŠ¸ë¦¬ë¨¸ì˜ í‹°ì–´ ì¤‘ í•˜ë‚˜ì™€ ì¼ì¹˜í•´ì•¼ í•¨
- `donor_address`: ìœ íš¨í•œ ì´ë”ë¦¬ì›€ ì£¼ì†Œ (Web3.is_address)
- `message`: ìµœëŒ€ 200ì, HTML íƒœê·¸ ì œê±° (bleach)
- `tx_hash`: 64ì 16ì§„ìˆ˜ (0x í¬í•¨)

**ì‘ë‹µ 201 Created**:
```json
{
  "donation_id": "d9e8f7g6-h5i4-3210-jklm-nopqrstuvwxy",
  "popup_message": "ëŒ€ë°•! ğŸ‰",
  "duration_ms": 5000
}
```

**ì‘ë‹µ 422 Unprocessable Entity** (ê²€ì¦ ì‹¤íŒ¨):
```json
{
  "detail": [
    {
      "loc": ["body", "message"],
      "msg": "ë©”ì‹œì§€ëŠ” 200ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
      "type": "value_error"
    }
  ]
}
```

### 5.4 ëª¨í‚¹ ëŒ€ì‹œë³´ë“œ

**ì—”ë“œí¬ì¸íŠ¸**: `GET /dashboard/{streamer_id}`

**ì„¤ëª…**: ìŠ¤íŠ¸ë¦¬ë¨¸ë¥¼ ìœ„í•œ ëª¨í‚¹ ëŒ€ì‹œë³´ë“œ (Phase 1ì—ì„œëŠ” ì •ì  í˜ì´ì§€).

**ì‘ë‹µ 200 OK**:
```html
<!DOCTYPE html>
<html>
  <head><title>Dashboard - Logan</title></head>
  <body>
    <h1>ë‹¹ì‹ ì˜ í›„ì› ë§í¬</h1>
    <p>https://donate.example.com/d/a1b2c3d4-e5f6-7890-abcd-ef1234567890</p>
    <button>ë³µì‚¬</button>
    <!-- ëª¨í‚¹ëœ ìµœê·¼ í›„ì› ë‚´ì—­ -->
  </body>
</html>
```

---

## ğŸ¨ ì‚¬ìš©ì í”Œë¡œìš°

### 6.1 ìŠ¤íŠ¸ë¦¬ë¨¸ í”Œë¡œìš° (Phase 1 - ëª¨í‚¹)

```
1. í•˜ë“œì½”ë”©ëœ ë°ì´í„°
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ # mock_data.py                      â”‚
   â”‚ MOCK_STREAMERS = {                  â”‚
   â”‚   "logan": Streamer(                â”‚
   â”‚     id="a1b2c3d4...",               â”‚
   â”‚     name="Logan",                   â”‚
   â”‚     wallet="0x742d...",             â”‚
   â”‚     platforms=["youtube", "twitch"],â”‚
   â”‚     tiers=[...]                     â”‚
   â”‚   )                                 â”‚
   â”‚ }                                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. ëŒ€ì‹œë³´ë“œ ì ‘ê·¼
   GET /dashboard/a1b2c3d4...

3. í›„ì› ë§í¬ ë³µì‚¬
   https://donate.example.com/d/a1b2c3d4...

4. ë°©ì†¡ ì„¤ëª…ë€/ì±„íŒ…ì— ê³µìœ 
```

### 6.2 ì‹œì²­ì í”Œë¡œìš° (Phase 1 - ì‹¤ì œ êµ¬í˜„)

```
Step 1: í›„ì› ë§í¬ í´ë¦­
   â†“
   https://donate.example.com/d/a1b2c3d4...

Step 2: í›„ì› í˜ì´ì§€ ë¡œë“œ
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Loganì—ê²Œ í›„ì›í•˜ê¸°                 â”‚
   â”‚ [ì•„ë°”íƒ€ ì´ë¯¸ì§€]                    â”‚
   â”‚                                    â”‚
   â”‚ ë°©ì†¡ í”Œë«í¼: [ğŸ¥ YouTube] [ğŸ® Twitch]â”‚
   â”‚                                    â”‚
   â”‚ í›„ì› ê¸ˆì•¡ì„ ì„ íƒí•˜ì„¸ìš”:            â”‚
   â”‚ â—‹ $1  â†’ "ê°ì‚¬í•©ë‹ˆë‹¤! ğŸ’™"          â”‚
   â”‚ â— $5  â†’ "ëŒ€ë°• í›„ì›! ğŸ‰"           â”‚
   â”‚ â—‹ $10 â†’ "ë ˆì „ë“œ! ğŸŒŸ"              â”‚
   â”‚                                    â”‚
   â”‚ ë©”ì‹œì§€ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš” (ì„ íƒ):        â”‚
   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
   â”‚ â”‚ ì¬ë°ŒëŠ” ë°©ì†¡ ê°ì‚¬í•©ë‹ˆë‹¤!        â”‚ â”‚
   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
   â”‚ 200ì ë‚¨ìŒ                         â”‚
   â”‚                                    â”‚
   â”‚ í´ë¦½ ì²¨ë¶€ (ì¤€ë¹„ ì¤‘):               â”‚
   â”‚ [ğŸ¬ í´ë¦½ ì„ íƒ] (ë¹„í™œì„±í™”)          â”‚
   â”‚                                    â”‚
   â”‚ [ğŸ’³ ì§€ê°‘ ì—°ê²° í›„ í›„ì›í•˜ê¸°]         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 3: ì§€ê°‘ ì—°ê²°
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ì§€ê°‘ì„ ì„ íƒí•˜ì„¸ìš”                  â”‚
   â”‚                                    â”‚
   â”‚ [ğŸ¦Š MetaMask]                      â”‚
   â”‚ [ğŸ”µ Coinbase Wallet]               â”‚
   â”‚ [ğŸ’¼ WalletConnect]                 â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 4: x402 ê²°ì œ ì²˜ë¦¬
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ê²°ì œ ì²˜ë¦¬ ì¤‘ â³                    â”‚
   â”‚                                    â”‚
   â”‚ MetaMaskì—ì„œ ìŠ¹ì¸í•´ì£¼ì„¸ìš”:         â”‚
   â”‚                                    â”‚
   â”‚ ë°›ëŠ” ì£¼ì†Œ: 0x742d...               â”‚
   â”‚ ê¸ˆì•¡: 5 USDC                       â”‚
   â”‚ ë„¤íŠ¸ì›Œí¬: Base Sepolia             â”‚
   â”‚ ì˜ˆìƒ ìˆ˜ìˆ˜ë£Œ: < $0.001              â”‚
   â”‚                                    â”‚
   â”‚ [ìŠ¹ì¸ ëŒ€ê¸° ì¤‘...]                  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 5: ë¸”ë¡ì²´ì¸ í™•ì¸
   [íŠ¸ëœì­ì…˜ ì œì¶œ ì™„ë£Œ]
   TX Hash: 0xabcdef...

Step 6: ê°ì‚¬ í˜ì´ì§€
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ğŸ‰ í›„ì› ì™„ë£Œ!                      â”‚
   â”‚                                    â”‚
   â”‚ Loganì—ê²Œ $5ë¥¼ í›„ì›í–ˆìŠµë‹ˆë‹¤        â”‚
   â”‚                                    â”‚
   â”‚ ë°©ì†¡ í™”ë©´ì— í‘œì‹œë  ë©”ì‹œì§€:         â”‚
   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
   â”‚ â”‚ ğŸ’¬ ëŒ€ë°• í›„ì›! ğŸ‰               â”‚ â”‚
   â”‚ â”‚ "ì¬ë°ŒëŠ” ë°©ì†¡ ê°ì‚¬í•©ë‹ˆë‹¤!"      â”‚ â”‚
   â”‚ â”‚ - 0x1234...                    â”‚ â”‚
   â”‚ â”‚ (5ì´ˆê°„ í‘œì‹œ)                   â”‚ â”‚
   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
   â”‚                                    â”‚
   â”‚ ìŠ¤íŠ¸ë¦¬ë¨¸ì˜ ë©”ì‹œì§€:                 â”‚
   â”‚ "ë°©ì†¡ ì‹œì²­í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!"    â”‚
   â”‚                                    â”‚
   â”‚ [ğŸ”™ ë°©ì†¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°]             â”‚
   â”‚                                    â”‚
   â”‚ íŠ¸ëœì­ì…˜ í•´ì‹œ:                     â”‚
   â”‚ 0xabcdef... [ğŸ”— BaseScanì—ì„œ ë³´ê¸°]â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### 7.1 ë°±ì—”ë“œ

**í”„ë ˆì„ì›Œí¬**: FastAPI 0.115.12+

**í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬**:
```toml
[project]
dependencies = [
    "fastapi>=0.115.12",        # ì›¹ í”„ë ˆì„ì›Œí¬
    "uvicorn[standard]>=0.34.0",# ASGI ì„œë²„
    "x402>=0.1.0",              # x402 í”„ë¡œí† ì½œ SDK
    "web3>=6.0.0",              # ì´ë”ë¦¬ì›€ ìƒí˜¸ì‘ìš©
    "python-rocksdb>=0.7.0",    # RocksDB ë°”ì¸ë”©
    "pydantic>=2.10.0",         # ë°ì´í„° ê²€ì¦
    "python-dotenv>=1.0.0",     # í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬
    "bleach>=6.0.0",            # HTML ìƒˆë‹ˆíƒ€ì´ì§•
]
```

**ê°œë°œ ë„êµ¬**:
```toml
[project.optional-dependencies]
dev = [
    "pytest>=8.0.0",            # í…ŒìŠ¤íŒ… í”„ë ˆì„ì›Œí¬
    "black>=24.0.0",            # ì½”ë“œ í¬ë§¤í„°
    "ruff>=0.8.0",              # ë¦°í„°
    "httpx>=0.27.0",            # í…ŒìŠ¤íŠ¸ìš© HTTP í´ë¼ì´ì–¸íŠ¸
]
```

### 7.2 í”„ë¡ íŠ¸ì—”ë“œ

**ê¸°ìˆ **: ë°”ë‹ë¼ JavaScript (í”„ë ˆì„ì›Œí¬ ì—†ìŒ)

**ë¼ì´ë¸ŒëŸ¬ë¦¬** (CDN):
```html
<!-- Web3 ìƒí˜¸ì‘ìš© -->
<script type="module">
  import { createPublicClient, http } from 'https://esm.sh/viem@2.21.0'
  import { baseSepolia } from 'https://esm.sh/viem@2.21.0/chains'
</script>

<!-- CSS í”„ë ˆì„ì›Œí¬ (ì„ íƒ) -->
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.0/dist/tailwind.min.css" rel="stylesheet">
```

### 7.3 ë°ì´í„°ë² ì´ìŠ¤

**RocksDB ì„¤ì •**:
```python
import rocksdb

opts = rocksdb.Options()
opts.create_if_missing = True
opts.max_open_files = 300000
opts.write_buffer_size = 67108864  # 64MB
opts.max_write_buffer_number = 3
opts.compression = rocksdb.CompressionType.lz4_compression

db = rocksdb.DB("./data/donations.db", opts)
```

**Key ì„¤ê³„**:
- `streamers:{uuid}` â†’ Streamer JSON
- `donations:{uuid}` â†’ DonationMessage JSON
- `idx:streamer:{wallet_address}` â†’ streamer_id (ì¸ë±ìŠ¤)

### 7.4 ë¸”ë¡ì²´ì¸

**ë„¤íŠ¸ì›Œí¬**:
- **ê°œë°œ/í…ŒìŠ¤íŠ¸**: Base Sepolia (Chain ID: 84532)
- **í”„ë¡œë•ì…˜**: Base Mainnet (Chain ID: 8453)

**RPC ì—”ë“œí¬ì¸íŠ¸**:
```bash
# Base Sepolia
https://sepolia.base.org

# Base Mainnet
https://mainnet.base.org
```

**ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸**: ì—†ìŒ (x402 í”„ë¡œí† ì½œì´ ì§ì ‘ ì „ì†¡ ì²˜ë¦¬)

---

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
streamer-donation/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main.py                 # FastAPI ì•± ì§„ì…ì 
â”‚   â”‚   â”œâ”€â”€ models.py               # Pydantic ë°ì´í„° ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ database.py             # RocksDB ë˜í¼ í´ë˜ìŠ¤
â”‚   â”‚   â”œâ”€â”€ config.py               # í™˜ê²½ ì„¤ì • (Pydantic Settings)
â”‚   â”‚   â”œâ”€â”€ mock_data.py            # í•˜ë“œì½”ë”©ëœ ìŠ¤íŠ¸ë¦¬ë¨¸ ë°ì´í„°
â”‚   â”‚   â””â”€â”€ routes/
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ streamers.py        # GET /api/streamer/{id}
â”‚   â”‚       â””â”€â”€ donations.py        # POST /api/donate/{id}/message
â”‚   â”‚
â”‚   â”œâ”€â”€ static/
â”‚   â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”‚   â””â”€â”€ styles.css          # ì»¤ìŠ¤í…€ ìŠ¤íƒ€ì¼
â”‚   â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”‚   â”œâ”€â”€ donation.js         # í›„ì› í˜ì´ì§€ ë¡œì§
â”‚   â”‚   â”‚   â””â”€â”€ wallet.js           # Web3 ì§€ê°‘ ì—°ê²°
â”‚   â”‚   â””â”€â”€ images/
â”‚   â”‚       â”œâ”€â”€ logo.png
â”‚   â”‚       â””â”€â”€ platforms/
â”‚   â”‚           â”œâ”€â”€ youtube.svg
â”‚   â”‚           â””â”€â”€ twitch.svg
â”‚   â”‚
â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â”œâ”€â”€ base.html               # HTML ê¸°ë³¸ í…œí”Œë¦¿
â”‚   â”‚   â”œâ”€â”€ index.html              # ëœë”© í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ dashboard.html          # ëª¨í‚¹ ëŒ€ì‹œë³´ë“œ
â”‚   â”‚   â”œâ”€â”€ donate.html             # í›„ì› í˜ì´ì§€
â”‚   â”‚   â””â”€â”€ thank_you.html          # ê°ì‚¬ í˜ì´ì§€
â”‚   â”‚
â”‚   â”œâ”€â”€ tests/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ conftest.py             # pytest ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ test_models.py          # ë°ì´í„° ëª¨ë¸ í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ test_database.py        # RocksDB í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ test_api.py             # API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
â”‚   â”‚   â””â”€â”€ test_integration.py     # E2E í…ŒìŠ¤íŠ¸
â”‚   â”‚
â”‚   â”œâ”€â”€ data/                        # RocksDB íŒŒì¼ (gitignore)
â”‚   â”‚   â””â”€â”€ .gitkeep
â”‚   â”‚
â”‚   â”œâ”€â”€ pyproject.toml              # ì˜ì¡´ì„± ì •ì˜
â”‚   â”œâ”€â”€ .env.example                # í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿
â”‚   â”œâ”€â”€ .gitignore
â”‚   â””â”€â”€ README.md                   # ë°±ì—”ë“œ ì‹¤í–‰ ê°€ì´ë“œ (ì˜ì–´)
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ API.md                      # API ìƒì„¸ ë¬¸ì„œ
â”‚   â”œâ”€â”€ ARCHITECTURE.md             # ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
â”‚   â”œâ”€â”€ DEPLOYMENT.md               # ë°°í¬ ê°€ì´ë“œ
â”‚   â””â”€â”€ PHASE2.md                   # 2ë‹¨ê³„ ê³„íš
â”‚
â”œâ”€â”€ PRD.md                          # ì´ ë¬¸ì„œ (ì˜ì–´)
â”œâ”€â”€ PRD.ko.md                       # ì´ ë¬¸ì„œ (í•œêµ­ì–´)
â”œâ”€â”€ README.md                       # í”„ë¡œì íŠ¸ ì†Œê°œ (ì˜ì–´)
â””â”€â”€ README.ko.md                    # í”„ë¡œì íŠ¸ ì†Œê°œ (í•œêµ­ì–´)
```

---

## ğŸ” ë³´ì•ˆ ê°€ì´ë“œë¼ì¸

### 8.1 êµ¬í˜„ëœ ë³´ì•ˆ ì¡°ì¹˜

#### 8.1.1 ì§€ê°‘ ì£¼ì†Œ ê²€ì¦
```python
from web3 import Web3

def validate_ethereum_address(address: str) -> bool:
    """
    Validate Ethereum address format using Web3.py.

    Args:
        address: Ethereum address string (should start with 0x)

    Returns:
        True if valid, False otherwise

    Raises:
        ValueError: If address format is invalid
    """
    if not Web3.is_address(address):
        raise ValueError(f"Invalid Ethereum address: {address}")
    return True
```

#### 8.1.2 í›„ì› ê¸ˆì•¡ ì œí•œ
```python
from pydantic import Field, validator

class DonationRequest(BaseModel):
    amount_usd: float = Field(
        ...,
        ge=0.01,  # ìµœì†Œ $0.01
        le=1000.0  # ìµœëŒ€ $1000
    )

    @validator('amount_usd')
    def validate_amount(cls, v):
        # ìŠ¤íŠ¸ë¦¬ë¨¸ì˜ í‹°ì–´ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ ì¶”ê°€ ê²€ì¦
        if v not in ALLOWED_TIERS:
            raise ValueError(f"Amount must be one of: {ALLOWED_TIERS}")
        return v
```

#### 8.1.3 ë©”ì‹œì§€ ìƒˆë‹ˆíƒ€ì´ì§•
```python
import bleach

def sanitize_message(message: str) -> str:
    """
    Remove all HTML tags and limit length to prevent XSS attacks.

    Args:
        message: User-provided message string

    Returns:
        Sanitized message (max 200 characters)
    """
    # Remove all HTML tags
    clean = bleach.clean(message, tags=[], strip=True)

    # Limit length
    return clean[:200]
```

#### 8.1.4 CORS ì„¤ì •
```python
from fastapi.middleware.cors import CORSMiddleware

app.add_middleware(
    CORSMiddleware,
    allow_origins=[
        "http://localhost:3000",
        "http://localhost:8000",
        # í”„ë¡œë•ì…˜ ë„ë©”ì¸ ì¶”ê°€
    ],
    allow_credentials=True,
    allow_methods=["GET", "POST"],
    allow_headers=["*"],
)
```

### 8.2 2ë‹¨ê³„ ë³´ì•ˆ ì¡°ì¹˜ (ë¯¸êµ¬í˜„)

- **Rate Limiting**: IP/ì§€ê°‘ ê¸°ë°˜ ìš”ì²­ ì œí•œ (Redis + FastAPI-Limiter)
- **ì¸ì¦/ê¶Œí•œ**: OAuth 2.0 + JWT í† í°
- **íŠ¸ëœì­ì…˜ ì¬ìƒ ê³µê²© ë°©ì§€**: Nonce ì¶”ì 
- **DDoS ë°©ì–´**: Cloudflare, Nginx rate limits
- **ì›¹í›… ì„œëª… ê²€ì¦**: HMAC-SHA256

---

## ğŸ“… ê°œë°œ ì¼ì •

### Phase 1: MVP (2-3ì£¼)

#### Week 1: í•µì‹¬ ì¸í”„ë¼
| ì¼ì°¨ | ì‘ì—… | ë‹´ë‹¹ | ì™„ë£Œ ê¸°ì¤€ |
|------|------|------|-----------|
| 1-2ì¼ | í”„ë¡œì íŠ¸ ì„¤ì •, RocksDB í†µí•© | Backend | `pytest tests/test_database.py` í†µê³¼ |
| 3-4ì¼ | API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„ | Backend | Swagger UIì—ì„œ ëª¨ë“  API í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ |
| 5-7ì¼ | x402 ë¯¸ë“¤ì›¨ì–´ í†µí•© | Backend | Base Sepoliaì—ì„œ ê²°ì œ ì„±ê³µ |

#### Week 2: í”„ë¡ íŠ¸ì—”ë“œ & UX
| ì¼ì°¨ | ì‘ì—… | ë‹´ë‹¹ | ì™„ë£Œ ê¸°ì¤€ |
|------|------|------|-----------|
| 8-10ì¼ | í›„ì› í˜ì´ì§€ UI/UX | Frontend | ëª¨ë“  í‹°ì–´ ì„ íƒ ë° ë©”ì‹œì§€ ì…ë ¥ ê°€ëŠ¥ |
| 11-12ì¼ | Web3 ì§€ê°‘ ì—°ê²° | Frontend | MetaMask/Coinbase Wallet ì—°ê²° ì„±ê³µ |
| 13-14ì¼ | ëª¨í‚¹ ëŒ€ì‹œë³´ë“œ | Frontend | í›„ì› ë§í¬ ë³µì‚¬ ê¸°ëŠ¥ ë™ì‘ |

#### Week 3: í…ŒìŠ¤íŠ¸ & ë¬¸ì„œí™”
| ì¼ì°¨ | ì‘ì—… | ë‹´ë‹¹ | ì™„ë£Œ ê¸°ì¤€ |
|------|------|------|-----------|
| 15-17ì¼ | E2E í…ŒìŠ¤íŠ¸ | QA | ì „ì²´ í›„ì› í”Œë¡œìš° 5íšŒ ì—°ì† ì„±ê³µ |
| 18-19ì¼ | ë¬¸ì„œ ì‘ì„± | Tech Writer | README.md, API.md ì™„ì„± |
| 20-21ì¼ | ë°°í¬ & ë°ëª¨ | DevOps | í…ŒìŠ¤íŠ¸ í™˜ê²½ ë°°í¬ + ë°ëª¨ ì˜ìƒ |

### Phase 2: AI Agent í†µí•© (ë¯¸ì •)
- Google A2A í”„ë¡œí† ì½œ ì—°êµ¬
- ìì—°ì–´ í›„ì› ëª…ë ¹ ì²˜ë¦¬
- ì‹¤ì‹œê°„ ì•Œë¦¼ (WebSocket)
- í´ë¦½ ì—…ë¡œë“œ/ì €ì¥

---

## âœ… ì„±ê³µ ê¸°ì¤€

### 9.1 ê¸°ëŠ¥ ì™„ì„±ë„

| ê¸°ëŠ¥ | ì„±ê³µ ê¸°ì¤€ | ì¸¡ì • ë°©ë²• |
|------|-----------|-----------|
| í›„ì› ë§í¬ ìƒì„± | UUID ê¸°ë°˜ ê³ ìœ  ë§í¬ | `len(uuid) == 36` |
| í›„ì› í‹°ì–´ ì„ íƒ | ëª¨ë“  í‹°ì–´ ì„ íƒ ê°€ëŠ¥ | UI í´ë¦­ í…ŒìŠ¤íŠ¸ |
| Web3 ì§€ê°‘ ì—°ê²° | MetaMask, Coinbase Wallet ì§€ì› | ë‘ ì§€ê°‘ ëª¨ë‘ ì—°ê²° ì„±ê³µ |
| x402 ê²°ì œ | ê²°ì œ ì„±ê³µë¥  â‰¥ 95% | 100íšŒ í…ŒìŠ¤íŠ¸ ì¤‘ 95íšŒ ì„±ê³µ |
| ë©”ì‹œì§€ ì…ë ¥ | 200ì ì œí•œ, XSS ë°©ì§€ | `<script>` íƒœê·¸ ì œê±° í™•ì¸ |
| ê°ì‚¬ í˜ì´ì§€ | 5ì´ˆ ì´ë‚´ í‘œì‹œ | Performance API ì¸¡ì • |

### 9.2 ì„±ëŠ¥ ì§€í‘œ

| ì§€í‘œ | ëª©í‘œ | ì¸¡ì • ë„êµ¬ |
|------|------|-----------|
| í˜ì´ì§€ ë¡œë“œ ì‹œê°„ | < 2ì´ˆ | Lighthouse |
| x402 ê²°ì œ ì²˜ë¦¬ | < 5ì´ˆ | Custom Timer |
| RocksDB ì¿¼ë¦¬ | < 10ms | Python `time.perf_counter()` |
| API ì‘ë‹µ ì‹œê°„ | < 200ms | FastAPI Middleware |
| ë™ì‹œ ì ‘ì† ì§€ì› | 100ëª… | Locust ë¶€í•˜ í…ŒìŠ¤íŠ¸ |

### 9.3 ë³´ì•ˆ ê²€ì¦

| í•­ëª© | ê²€ì¦ ë°©ë²• | í†µê³¼ ê¸°ì¤€ |
|------|-----------|-----------|
| ì§€ê°‘ ì£¼ì†Œ ê²€ì¦ | ì˜ëª»ëœ ì£¼ì†Œ ì…ë ¥ | 422 ì—ëŸ¬ ë°˜í™˜ |
| XSS ë°©ì§€ | `<script>alert(1)</script>` ì…ë ¥ | íƒœê·¸ ì œê±° í™•ì¸ |
| SQL Injection | N/A (RocksDB ì‚¬ìš©) | - |
| ê¸ˆì•¡ ë²”ìœ„ ì œí•œ | $0, $10000 ì…ë ¥ | 422 ì—ëŸ¬ ë°˜í™˜ |
| CORS ê²€ì¦ | í—ˆìš©ë˜ì§€ ì•Šì€ ë„ë©”ì¸ ìš”ì²­ | 403 ì—ëŸ¬ ë°˜í™˜ |

### 9.4 ë¬¸ì„œ ì™„ì„±ë„

- [ ] README.md (ì˜ì–´) - ì„¤ì¹˜ ë° ì‹¤í–‰ ê°€ì´ë“œ
- [ ] README.ko.md (í•œêµ­ì–´) - í•œê¸€ íŠœí† ë¦¬ì–¼
- [ ] API.md - ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ ë¬¸ì„œí™”
- [ ] ARCHITECTURE.md - ì‹œìŠ¤í…œ ë‹¤ì´ì–´ê·¸ë¨
- [ ] ëª¨ë“  í•¨ìˆ˜ì— docstring (ì˜ì–´)
- [ ] ì¸ë¼ì¸ ì£¼ì„ (ì˜ì–´, ë³µì¡í•œ ë¡œì§ë§Œ)

---

## ğŸš€ ë°°í¬ ê³„íš

### 10.1 ê°œë°œ í™˜ê²½

```bash
# ë¡œì»¬ ê°œë°œ ì„œë²„
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# í™˜ê²½ ë³€ìˆ˜
NETWORK=base-sepolia
DEBUG=true
```

### 10.2 í…ŒìŠ¤íŠ¸ í™˜ê²½

**í”Œë«í¼**: Railway / Render / Fly.io

**ì„¤ì •**:
```bash
# í™˜ê²½ ë³€ìˆ˜
NETWORK=base-sepolia
DEBUG=false
ALLOWED_ORIGINS=https://donation-test.example.com

# ë„ë©”ì¸
https://donation-test.example.com
```

### 10.3 í”„ë¡œë•ì…˜ í™˜ê²½ (Phase 1.5)

**í”Œë«í¼**: AWS EC2 / Google Cloud Run

**ìš”êµ¬ì‚¬í•­**:
- HTTPS í•„ìˆ˜ (Let's Encrypt)
- Base Mainnet ì‚¬ìš©
- RocksDB ë°±ì—… (ì¼ì¼)
- ëª¨ë‹ˆí„°ë§ (Sentry, DataDog)

---

## ğŸ”® Phase 2 ë¯¸ë¦¬ë³´ê¸°

### AI Agent í†µí•© (Google A2A)

**ì‚¬ìš© ì‚¬ë¡€**:
```
ì‹œì²­ì: "Hey agent, donate $5 to Logan with message 'ì¬ë°ŒëŠ” ë°©ì†¡!'"
Agent: "Sure! I'll send $5 to Logan on Base network. Confirm?"
ì‹œì²­ì: "Yes"
Agent: [ìë™ìœ¼ë¡œ ì§€ê°‘ì—ì„œ ì„œëª… â†’ ê²°ì œ ì™„ë£Œ]
Agent: "âœ… Donation sent! Transaction: 0xabcd..."
```

**ê¸°ìˆ  ìŠ¤íƒ**:
- Google Agent-to-Agent (A2A) Protocol
- LangChain (Agent Orchestration)
- CDP AgentKit (Wallet Operations)
- WebSocket (Real-time Updates)

**ì¶”ê°€ ê¸°ëŠ¥**:
- ìŒì„± ëª…ë ¹ í›„ì›
- ì¼ì • ê¸°ë°˜ ìë™ í›„ì› ("ë§¤ì£¼ ê¸ˆìš”ì¼ $10 í›„ì›")
- ì¼ê´„ í›„ì› ("3ëª…ì˜ ìŠ¤íŠ¸ë¦¬ë¨¸ì—ê²Œ ê°ê° $5 í›„ì›")

---

## ğŸ“ ë¬¸ì˜ ë° í”¼ë“œë°±

**í”„ë¡œì íŠ¸ ê´€ë¦¬ì**: Logan (Base Korea Developer Ambassador)

**GitHub Issues**: https://github.com/YOUR_USERNAME/awesome-x402-on-base/issues

**Discord**: Base Korea ì»¤ë®¤ë‹ˆí‹°

---

**ë¬¸ì„œ ë²„ì „**: 1.0
**ìµœì¢… ìŠ¹ì¸**: 2025-01-09
**ë‹¤ìŒ ê²€í† **: Phase 1 ì™„ë£Œ ì‹œ (2025-02-01 ì˜ˆì •)
